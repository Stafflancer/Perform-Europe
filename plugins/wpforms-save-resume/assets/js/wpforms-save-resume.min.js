"use strict";var WPFormsSaveResume=window.WPFormsSaveResume||function(o,a,s){var r,i,n,t,m,f={init:function(){s(o).on("click",".wpforms-save-resume-button",f.showSaveResume).on("click",".wpforms-save-resume-disclaimer-back",f.goBack).on("click",".wpforms-save-resume-disclaimer-continue",f.showConfirmation).on("click",".wpforms-save-resume-shortcode-copy",f.copyShortcodeToClipboard).on("change",".wpforms-field-email input[type=email]",f.validateEmail),s(".wpforms-form").on("wpformsAjaxSubmitFailed",f.submitFailed)},showSaveResume:function(e){r=s(e.target).closest("form.wpforms-form"),i=r.parent().parent(),t=r.find(".wpforms-submit-container").is(":visible"),f.scrollToTop(r.offset().top-75,750),1<=i.find(".wpforms-save-resume-disclaimer").length?f.showDisclaimer(e):f.showConfirmation(e)},prepareData:function(e){n=new FormData(e.get(0)),m=e.data("formid"),n.append("action","wpforms_save_resume"),n.append("page_url",a.location.href),e.data("token")&&0===s(".wpforms-token",e).length&&n.append("wpforms[token]",e.data("token"))},showDisclaimer:function(e){e.preventDefault(),f.prepareData(r),r.find(".wpforms-field-container, .wpforms-submit-container, .wpforms-recaptcha-container, .wpforms-page-indicator, .wpforms-error-container, .wpforms-save-resume-expired-message").hide(),f.hideExpiredMessage(),i.find(".wpforms-save-resume-disclaimer").detach().insertAfter(r).show()},showConfirmation:function(e){e.preventDefault(),i.find(".wpforms-save-resume-disclaimer").hide(),f.prepareData(r),r.find(".wpforms-field-container, .wpforms-submit-container, .wpforms-recaptcha-container, .wpforms-page-indicator, .wpforms-error-container").hide(),f.hideExpiredMessage(),i.find(".wpforms-save-resume-confirmation").detach().insertAfter(r).show(),f.sendData(e)},sendData:function(){var e;n&&m&&(f.debug("The hash is generating..."),e={type:"post",dataType:"json",url:wpforms_save_resume.ajaxurl,data:n,cache:!1,contentType:!1,processData:!1},s.ajax(e).done(function(e){!1!==e.success&&e.data.hash.length?(f.debug("The hash has generated successfully"),i.find(".wpforms-save-resume-entry-id").val(e.data.entry_id),i.find(".wpforms-save-resume-shortcode").val(e.data.hash),i.find(".wpforms-submit").prop("disabled",!1)):(f.debug("The hash hasn't generated"),r.find(".wpforms-error-container").remove(),r.prepend('<div class="wpforms-error-container">'+wpforms_settings.save_resume_hash_error+"</div>"),i.find(".wpforms-save-resume-confirmation").hide(),r.find(".wpforms-field-container, .wpforms-submit-container, .wpforms-recaptcha-container, .wpforms-page-indicator, .wpforms-error-container").show(),wpforms.scrollToError(r.find(".wpforms-error-container")))}),n=new FormData)},goBack:function(e){e.preventDefault();e=r.find(".wpforms-submit-container");i.find(".wpforms-save-resume-disclaimer").hide(),f.hideExpiredMessage(),!1!==t&&e.show(),r.find(".wpforms-field-container, .wpforms-recaptcha-container, .wpforms-page-indicator").show()},copyShortcodeToClipboard:function(){var e=i.find(".wpforms-save-resume-shortcode"),r=i.find(".wpforms-save-resume-shortcode-copy"),s=(e.prop("disabled",!1).select().prop("disabled",!0),o.execCommand("copy"),r.find("i"));s.removeClass("fa-files-o").addClass("fa-check"),a.setTimeout(function(){s.removeClass("fa-check").addClass("fa-files-o")},2500),f.debug("The link has copied successfully")},validateEmail:function(e){e.preventDefault(),s(r).validate({errorClass:"wpforms-error",validClass:"wpforms-valid",rules:{email:{required:!0,email:!0}},messages:{email:wpforms_settings.val_email},submitHandler:function(e){e.submit()}})},hideExpiredMessage:function(){var e=i.find(".wpforms-save-resume-expired-message");0<e.length&&e.hide()},scrollToTop:function(e,r){r=r||1e3,s("html, body").animate({scrollTop:parseInt(e,10)},{duration:r})},debug:function(e){a.location.hash&&"#wpformsfadebug"===a.location.hash&&console.log("WPForms S&R: "+e)},submitFailed:function(e,r){r.data.save_resume_error&&((r=s(e.target)).find(".wpforms-field-container").hide(),r.find(".wpforms-submit-container").hide())}};return f}(document,window,jQuery);WPFormsSaveResume.init();